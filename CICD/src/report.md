### Part 1. Настройка **gitlab-runner**

**== Задание ==**

##### Подними виртуальную машину *Ubuntu Server 22.04 LTS*.

##### Скачай и установи на виртуальную машину **gitlab-runner**.

![basic_ci_cd](./Images/1/1.png)

![basic_ci_cd](./Images/1/2.png)

##### Запусти **gitlab-runner** и зарегистрируй его для использования в текущем проекте (*DO6_CICD*).
- Для регистрации понадобятся URL и токен, которые можно получить на страничке задания на платформе.

![basic_ci_cd](./Images/1/3.png)

![basic_ci_cd](./Images/1/4.png)

### Part 2. Сборка

**== Задание ==**

#### Напиши этап для **CI** по сборке приложений из проекта *C2_SimpleBashUtils*.

##### В файле _gitlab-ci.yml_ добавь этап запуска сборки через мейк файл из проекта _C2_.

##### Файлы, полученные после сборки (артефакты), сохрани в произвольную директорию со сроком хранения 30 дней.

![basic_ci_cd](./Images/2/1.png)

![basic_ci_cd](./Images/2/3.png)

![basic_ci_cd](./Images/2/4.png)

### Part 3. Тест кодстайла

**== Задание ==**

#### Напиши этап для **CI**, который запускает скрипт кодстайла (*clang-format*).

![basic_ci_cd](./Images/3/1.png)

##### Если кодстайл не прошел, то «зафейли» пайплайн.

##### В пайплайне отобрази вывод утилиты *clang-format*.

Если кодстайл не прошел:

![basic_ci_cd](./Images/3/3.png)

![basic_ci_cd](./Images/3/4.png)

Если кодстайл прошел:

![basic_ci_cd](./Images/3/5.png)

![basic_ci_cd](./Images/3/6.png)

### Part 4. Интеграционные тесты

**== Задание ==**

#### Напиши этап для **CI**, который запускает твои интеграционные тесты из того же проекта.

##### Запусти этот этап автоматически только при условии, если сборка и тест кодстайла прошли успешно.

##### Если тесты не прошли, то «зафейли» пайплайн.

##### В пайплайне отобрази вывод, что интеграционные тесты успешно прошли / провалились.

![basic_ci_cd](./Images/4/1.png)

Если тесты прошли:

![basic_ci_cd](./Images/4/3.png)

![basic_ci_cd](./Images/4/4.png)

![basic_ci_cd](./Images/4/5.png)

Если тесты не прошли:

![basic_ci_cd](./Images/4/6.png)

![basic_ci_cd](./Images/4/7.png)

![basic_ci_cd](./Images/4/8.png)

### Part 5. Этап деплоя

**== Задание ==**

##### Подними вторую виртуальную машину *Ubuntu Server 22.04 LTS*.

![basic_ci_cd](./Images/5/1.png)

![basic_ci_cd](./Images/5/2.png)

![basic_ci_cd](./Images/5/3.png)

![basic_ci_cd](./Images/5/4.png)

для ws2:

![basic_ci_cd](./Images/5/5.png)

для первой машины:

![basic_ci_cd](./Images/5/6.png)

![basic_ci_cd](./Images/5/7.png)

#### Напиши этап для **CD**, который «разворачивает» проект на другой виртуальной машине.

##### Запусти этот этап вручную при условии, что все предыдущие этапы прошли успешно.

##### Напиши bash-скрипт, который при помощи **ssh** и **scp** копирует файлы, полученные после сборки (артефакты), в директорию */usr/local/bin* второй виртуальной машины.

##### В файле _gitlab-ci.yml_ добавь этап запуска написанного скрипта.

![basic_ci_cd](./Images/5/8.png)

![basic_ci_cd](./Images/5/9.png)

![basic_ci_cd](./Images/5/13.png)

##### В случае ошибки «зафейли» пайплайн.

![basic_ci_cd](./Images/5/11.png)

В результате ты должен получить готовые к работе приложения из проекта *C2_SimpleBashUtils* (s21_cat и s21_grep) на второй виртуальной машине.

![basic_ci_cd](./Images/5/12.png)

### Part 6. Дополнительно. Уведомления

**== Задание ==**

##### Настрой уведомления о успешном/неуспешном выполнении пайплайна через бота с именем «[твой nickname] DO6 CI/CD» в *Telegram*.

- Текст уведомления должен содержать информацию об успешности прохождения как этапа **CI**, так и этапа **CD**.
- В остальном текст уведомления может быть произвольным.

![basic_ci_cd](./Images/6/1.png)

![basic_ci_cd](./Images/6/2.png)

![basic_ci_cd](./Images/6/3.png)

![basic_ci_cd](./Images/6/4.png)

![basic_ci_cd](./Images/6/5.png)
